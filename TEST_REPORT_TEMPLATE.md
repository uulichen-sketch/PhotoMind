# PhotoMind 端到端测试报告

**测试日期**: 2026-02-15  
**测试版本**: main 分支最新代码  
**测试环境**: Docker Desktop  

---

## 1. 环境检查

### 1.1 前置条件
- [ ] Docker Desktop 已安装并运行
- [ ] Docker Compose 可用
- [ ] 端口 3000 和 8000 未被占用
- [ ] `.env` 文件已配置（包含 GLM_API_KEY）

### 1.2 构建测试
```bash
# 执行命令
docker-compose build --no-cache

# 预期结果
# - backend 镜像构建成功
# - frontend 镜像构建成功
# - 无错误信息
```

**实际结果**: ⬜ 通过 / ⬜ 失败  
**备注**: 

---

## 2. 服务启动测试

### 2.1 启动服务
```bash
docker-compose up -d

# 等待 30 秒
docker-compose ps
```

**预期结果**:
- photomind-backend: Up (healthy)
- photomind-frontend: Up

**实际结果**: ⬜ 通过 / ⬜ 失败  
**备注**:

### 2.2 健康检查
```bash
# 基础健康检查
curl http://localhost:8000/health

# 详细健康检查
curl http://localhost:8000/health/detailed
```

**预期结果**:
```json
{
  "status": "healthy",
  "services": {
    "chromadb": {"status": "healthy", "photo_count": 0},
    "asr": {...},
    "geocoding": {...}
  }
}
```

**实际结果**: ⬜ 通过 / ⬜ 失败  
**备注**:

---

## 3. 前端功能测试

### 3.1 首页访问
- **URL**: http://localhost:3000
- **预期**: 显示 PhotoMind 首页，左侧导航栏正常

| 检查项 | 结果 |
|--------|------|
| 页面加载 | ⬜ 通过 ⬜ 失败 |
| 导航栏显示 | ⬜ 通过 ⬜ 失败 |
| 无控制台错误 | ⬜ 通过 ⬜ 失败 |

### 3.2 导入功能测试

#### 3.2.1 网页上传导入
1. 点击"导入"菜单
2. 点击"选择文件夹"或拖拽上传
3. 选择包含照片的文件夹
4. 点击"开始导入"

| 检查项 | 结果 |
|--------|------|
| 文件选择正常 | ⬜ 通过 ⬜ 失败 |
| 实时进度显示 | ⬜ 通过 ⬜ 失败 |
| AI 评分显示 | ⬜ 通过 ⬜ 失败 |
| 导入完成提示 | ⬜ 通过 ⬜ 失败 |
| 导入后照片可见 | ⬜ 通过 ⬜ 失败 |

#### 3.2.2 切换页面恢复进度
1. 开始导入
2. 切换到"首页"或"搜索"页
3. 返回"导入"页

| 检查项 | 结果 |
|--------|------|
| 提示恢复进度弹窗 | ⬜ 通过 ⬜ 失败 |
| 点击恢复后显示当前进度 | ⬜ 通过 ⬜ 失败 |

### 3.3 大图浏览器测试
1. 导入成功后，点击任意照片
2. 测试以下功能：

| 功能 | 结果 |
|------|------|
| 大图显示 | ⬜ 通过 ⬜ 失败 |
| 滚轮缩放 | ⬜ 通过 ⬜ 失败 |
| 拖拽平移 | ⬜ 通过 ⬜ 失败 |
| 左右箭头切换 | ⬜ 通过 ⬜ 失败 |
| 底部缩略图点击 | ⬜ 通过 ⬜ 失败 |
| ESC 关闭 | ⬜ 通过 ⬜ 失败 |
| 查看 AI 评分 | ⬜ 通过 ⬜ 失败 |

### 3.4 搜索功能测试

#### 3.4.1 文字搜索
1. 进入搜索页面
2. 输入关键词"海边"
3. 点击搜索

| 检查项 | 结果 |
|--------|------|
| 搜索执行 | ⬜ 通过 ⬜ 失败 |
| 结果显示 | ⬜ 通过 ⬜ 失败 |
| 点击图片可浏览 | ⬜ 通过 ⬜ 失败 |

#### 3.4.2 语音搜索（ASR 状态检测）
1. 切换到"语音搜索"标签
2. 观察 ASR 状态显示

| 场景 | 预期 | 结果 |
|------|------|------|
| 模型下载中 | 显示下载进度提示，禁用录音 | ⬜ 通过 ⬜ 失败 |
| 模型已下载 | 显示录音按钮 | ⬜ 通过 ⬜ 失败 |
| ASR 不可用 | 显示错误信息和刷新按钮 | ⬜ 通过 ⬜ 失败 |

### 3.5 照片详情页
1. 点击任意照片进入详情页
2. 检查以下内容：

| 内容 | 结果 |
|------|------|
| 照片大图显示 | ⬜ 通过 ⬜ 失败 |
| AI 评分展示 | ⬜ 通过 ⬜ 失败 |
| AI 描述 | ⬜ 通过 ⬜ 失败 |
| 标签列表 | ⬜ 通过 ⬜ 失败 |
| EXIF 信息（时间、相机等） | ⬜ 通过 ⬜ 失败 |
| 拍摄参数（ISO、光圈等） | ⬜ 通过 ⬜ 失败 |

---

## 4. API 接口测试

运行自动化测试脚本：
```bash
python test_end_to_end.py
```

**预期输出**:
```
============================================================
PhotoMind 端到端 API 测试
============================================================
Base URL: http://localhost:8000

【健康检查测试】
✅ GET /health - Status: 200
✅ GET /health/detailed - Status: 200

【照片管理测试】
✅ GET /api/photo/ - Status: 200
✅ GET /api/photo/nonexistent - Status: 404

...（省略）

============================================================
测试结果: 12 通过, 0 失败
============================================================
🎉 所有测试通过！
```

**实际结果**:  
- 通过: ___  
- 失败: ___  

---

## 5. 性能测试

### 5.1 导入性能
- 测试照片数量: ___ 张
- 总耗时: ___ 秒
- 平均每张耗时: ___ 秒

### 5.2 搜索性能
- 文字搜索响应时间: ___ ms
- 语音搜索响应时间: ___ ms

### 5.3 内存占用
- 后端容器内存: ___ MB
- 前端容器内存: ___ MB

---

## 6. 问题汇总

| 序号 | 问题描述 | 严重程度 | 备注 |
|------|----------|----------|------|
| 1 | | ⬜ 高 ⬜ 中 ⬜ 低 | |
| 2 | | ⬜ 高 ⬜ 中 ⬜ 低 | |
| 3 | | ⬜ 高 ⬜ 中 ⬜ 低 | |

---

## 7. 测试结论

- **总体状态**: ⬜ 通过 / ⬜ 部分通过 / ⬜ 不通过
- **是否可上线**: ⬜ 是 / ⬜ 否
- **主要问题**: 

---

**测试人员**: _______________  
**审核人员**: _______________  
